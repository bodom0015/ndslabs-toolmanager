<div class="row">
  <div class="col-sm-12">
    <div class="pull-right"></div>
    <h4>Registered Data Sets</h4>
    <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Identifier</th>
          <th width="15%" class="text-center">Metadata</th>
          <th width="15%" class="text-center">Cite Dataset</th>
          <th width="15%" class="text-center">Launch Notebook</th>
          <th width="20%"></th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="(id, metadata) in datasets">
          <!-- Link to the dataset -->
          <td>
            <a ng-href="{{ metadata.dataset.landing_url || (metadata.girder.api_protocol + metadata.girder.api_host + metadata.girder.api_port) }}" target="_blank">{{ metadata.dataset.label || id }}</a>
          </td>
          
          <!-- View the dataset metadata -->
          <td class="text-center">
            <button type="button" class="btn btn-info btn-xs"  ng-click="viewMetadata(metadata)">
              <i class="fa fa-fw fa-code"></i>
            </button>
          </td>
          
          <!-- View the dataset's citation -->
          <td class="text-center">
            <button type="button" class="btn btn-info btn-xs"  ng-click="viewCitation(id, metadata)">
              <i class="fa fa-fw fa-paperclip"></i>
            </button>
          </td>
          
          <!-- Launch a notebook -->
          <td class="text-center">
            <button class="btn btn-xs btn-primary" ng-click="resolve(id)" ng-if="!resolving[id]">
              <i class="fa fa-fw fa-play"></i>
            </button>
            <i class="fa fa-fw fa-spinner fa-pulse" ng-if="resolving[id]"></i>
          </td>
          
          <!-- Link to the launched notebook -->
          <td class="text-center">
            <a class="btn btn-xs btn-link" ng-href="{{ metadata.girder.tool_url }}" ng-if="metadata.girder.tool_url" target="_blank">
              View Notebook <i class="fa fa-fw fa-external-link-square"></i>
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  </div>
</div>

<div class="alert alert-info" ng-if="selectedMetadata">
  <i class="fa fa-fw fa-times pull-right cursor-pointer" ng-click="viewMetadata(null)"></i>
  <pre ng-if="viewJson">{{ selectedMetadata | json }}</pre>
  <span ng-if="!viewJson">{{ selectedMetadata }}</span>
</div>